<head>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.css"/>
<link rel="stylesheet" type="text/css" href="style.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!--<script src='bignumber.min.js'></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/7.2.1/bignumber.min.js"></script>
</head>


<script> 
import { Dharma, Web3 } from "@dharmaprotocol/dharma.js";
//const host = "http://localhost:8545";
//const provider = new Web3.providers.HttpProvider(host);
//const provider = window.web3.currentProvider;
//const dharma = new Dharma(provider);
//    const accounts = await dharma.blockchain.getAccounts();
//
//const loanRequest = await LoanRequest.create(dharma, {
// vals: null;
//});

</script>

<body>
    <div class="columns">
        <div class="column is-5"> 
<div style="margin: 30px;">
    <form id="formId" onsubmit="return submitForm()">
        <h1 style="font-size: 2.75vw;"><img src="dappraiselogo.png" style="height: 2.25vw"> dAppraise Request Funds <hr style="margin: 10px 0 10px 0;"> </h1>
  <a href="lender.html"> Not a borrower? Lend here</a> <br>
<div id="principle-line">
 <div class="field inline" >
  <label class="label">Principal Token</label>
  <div class="control">
    <input id="principal-denom" class="input" type="text" placeholder="SYMBOL">
  </div>
</div>   
    
<div class="field inline" >
  <label class="label">Principal Amount</label>
  <div class="control">
    <input id="principal-amount" class="input" type="number" placeholder="0">
  </div>
</div>
    </div>  
 <div class="field" >
  <label class="label">Collateral Denomination(s)</label>
  <div class="control">
    <input id="collateral-denom" class="input" type="text" placeholder="SYMBOLS, SEPARATED, BY, COMMAS">
  </div>
</div>    
    
   <div class="field" >
  <label class="label">Collateral Amount(s)</label>
        <p class="help">If multi-collateral, provide corresponding amounts, separated by commas</p>    
  <div class="control">
    <input id="collateral-amount" class="input" type="text" placeholder="0">
  </div>
</div>
        
   <div class="field" >
  <label class="label">Nonfungible Collateral Types</label>
        <p class="help">If multi-collateral, provide corresponding amounts, separated by commas</p>    
  <div class="control">
    <input id="nft-collateral-string" class="input" type="text" placeholder="CryptoKitties">
  </div>
</div>     
        
          <div class="field" >
  <label class="label">Nonfungible Collateral Ids</label>
        <p class="help">Ex: provide your Kitty IDs, separated by commas</p>    
  <div class="control">
    <input id="nft-id-string" class="input" type="text" placeholder="135, 246">
  </div>
</div>   
        
    
<div class="field inline" >
  <label class="label">Interest Rate (%)</label> 
  <div class="control">
    <input id="interest-rate" class="input" type="number" placeholder="0%">
  </div>
</div>
    
    <div>
<div class="field inline" >
  <label class="label">Term Length</label> 
  <div class="control">
    <input id="term" class="input" type="number" placeholder="3">
  </div>
</div>
    
<div class="field inline" >
  <label class="label">Term Time Units</label> 
  <div class="control">
    <input id="term-unit" class="input" type="text" placeholder="months">
  </div>
</div>
    </div>
   <div id="expiry-line">
<div class="field inline" >
  <label class="label">Expiry Time</label> 
  <div class="control">
    <input id="duration" class="input" type="number" placeholder="1">
  </div>
</div>
    
<div class="field inline" >
  <label class="label">Expiry Unit </label> 
  <div class="control">
    <input id="duration-unit" class="input" type="text" placeholder="week">
  </div>
</div>
       </div>

<div class="field">
  <label class="label">Message</label>
  <div class="control">
    <input id="message" class="input" type="text" placeholder="Feel free to tell us why you need this loan">
  </div>
</div>

<div class="field">
  <div class="control">
    <label class="checkbox">
      <input type="checkbox" checked>
      I agree to the <a href="#">terms and conditions</a>
    </label>
  </div>
</div>

<div class="field is-grouped">
  <div class="control">
    <button class="button is-link" value="subit">Submit</button>
  </div>
  <div class="control">
    <button class="button is-text">Cancel</button>
  </div>
</div>
    </form>
</div>
</div>
	</div>
</body>

<script>
     function submitForm() {  
$('#formId').submit(function() {
    // get an associative array of the values
    var values = {};
    $inputs.each(function() {
        values[this.name] = $(this).val();
    });
    console.log(values)
});
     }
</script>


<script>
    
    function submitForm() {
    event.preventDefault();
  
    var collateralTokenstring =  document.getElementById("collateral-denom").value;
    var coltokenList = collateralTokenstring.split(",");

    var collateralAmountstring = document.getElementById("collateral-amount").value;
    var colList = collateralAmountstring.split(",");
        
        
    var collateralTokenstring =  document.getElementById("nft-collateral-string").value;
    var nfttypeList = collateralTokenstring.split(",");
        
    var nftIdstring =  document.getElementById("nft-id-string").value;
    var nfttokenList = nftIdstring.split(",");
            
const terms = {
    principalAmount: document.getElementById("principal-amount").value,
    principalToken: document.getElementById("principal-denom").value,
    collateralTokens: coltokenList,
    collateralAmount: colList,
    nftTypes: nfttypeList,
    nftIds: nfttokenList,
    interestRate: document.getElementById("interest-rate").value,
    termDuration: document.getElementById("term").value,
    termUnit: document.getElementById("term-unit").value,
    expiresInDuration: document.getElementById("duration").value,
    expiresInUnit: document.getElementById("duration-unit").value,
}
console.log(terms);
        
         z = JSON.stringify(terms, null, "");
        alert("Your loan request has been submitted! \n \n Your data is as follows:" + z);
    }
                            
//                            });
//await loanRequest.signAsDebtor();
</script>

<!--

<script>
var BigNumber = require('bignumber.js');
</script>
-->
